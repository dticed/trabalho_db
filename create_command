CREATE TABLE IF NOT EXISTS editoras(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nome VARCHAR(45) NOT NULL,
	descricao TEXT(300)
);

CREATE TABLE IF NOT EXISTS livros(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	titulo VARCHAR(100) NOT NULL,
	paginas INTEGER NOT NULL,
	editora_id INTEGER NOT NULL,
	adicionado_em DATETIME DEFAULT CURRENT_TIMESTAMP,

	FOREIGN KEY (editora_id) REFERENCES editoras(id)
);

CREATE TABLE IF NOT EXISTS generos(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nome VARCHAR(45) NOT NULL UNIQUE,
	descricao TEXT(300)
);

CREATE TABLE IF NOT EXISTS autores(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nome VARCHAR(45) NOT NULL,
	adicionado_em DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS autor_livro(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	autor_id INTEGER NOT NULL,
	livro_id INTEGER NOT NULL,
	
	FOREIGN KEY (autor_id) REFERENCES autores(id),
	FOREIGN KEY (livro_id) REFERENCES livros(id)
);

CREATE TABLE IF NOT EXISTS genero_livro(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	genero_id INTEGER NOT NULL,
	livro_id INTEGER NOT NULL,
	
	FOREIGN KEY (genero_id) REFERENCES generos(id),
	FOREIGN KEY (livro_id) REFERENCES livros(id)
);